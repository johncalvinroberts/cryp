name: Code Cleanliness Check 👮🏽
on: [push]
jobs:
  check-frontend:
    name: Check Frontend
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - uses: actions/setup-node@v3

      - uses: pnpm/action-setup@v2
        with:
          version: 7.0.0
          run_install: |
              - cwd: ui
      - name: Check Typescript and Svelte files
        run: pnpm check
        working-directory: ui

      - name: Format files
        run: pnpm format
        working-directory: ui

      - name: Ensure can build successfully
        run: pnpm build
        working-directory: ui

      - name: Check for clean status
        run: sh scripts/ensure-git-clean.sh
